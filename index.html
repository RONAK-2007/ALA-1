<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Glass UI Encryptor</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #050d1e;
      --fg: #ddd;
      --accent: rgba(255, 255, 255, 0.05);
    }

    [data-theme="light"] {
      --bg: rgba(255, 255, 255, 0.6);
      --fg: #111;
      --accent: rgba(0, 0, 0, 0.06);
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      height: 100%;
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: var(--fg);
      overflow-x: hidden;
    }

    .blobs-bg, .animated-bg, #particles-js {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
    }

    #particles-js {
      z-index: -5;
      background: #050d1e;
    }

    .blobs-bg {
      z-index: -4;
      opacity: 0.75;
      filter: blur(32px) saturate(140%);
      animation: blobsGlow 10s alternate infinite ease-in-out;
    }

    @keyframes blobsGlow {
      0% { filter: blur(32px) brightness(1.0) saturate(140%); }
      50% { filter: blur(38px) brightness(1.1) saturate(200%); }
      100% { filter: blur(32px) brightness(1.0) saturate(140%); }
    }

    .animated-bg {
      background: radial-gradient(circle at 60% 35%, #6ef2ffcc 0%, transparent 60%),
                  radial-gradient(circle at 20% 75%, #a77cf7dd 0%, transparent 70%),
                  radial-gradient(circle at 80% 70%, #ffcaff99 0%, transparent 50%);
      filter: blur(60px);
      opacity: 0.7;
      animation: auroraMove 14s ease-in-out infinite alternate;
      z-index: -3;
    }

    @keyframes auroraMove {
      0% { filter: blur(60px) brightness(1); }
      100% { filter: blur(80px) brightness(1.15); }
    }

    .container {
      max-width: 600px;
      margin: 4rem auto;
      padding: 2rem;
      border-radius: 20px;
      background: var(--accent);
      backdrop-filter: blur(14px);
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 0 0 60px rgba(255, 255, 255, 0.04);
      z-index: 1;
      position: relative;
    }

    h2 {
      background: linear-gradient(45deg, #6af, #c3f);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align: center;
    }

    textarea, pre {
      width: 100%;
      padding: 1rem;
      border: none;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.05);
      color: var(--fg);
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }

    button {
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      color: var(--fg);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    button:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: scale(1.05);
    }

    .output-block { margin-bottom: 1rem; }
    .output-block pre {
      background: rgba(255, 255, 255, 0.05);
      padding: 0.8rem;
      border-radius: 10px;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-word;
      font-size: 0.9rem;
    }

    @media (max-width: 600px) {
      .container { margin: 1rem; padding: 1.2rem; }
    }
  </style>
</head>
<body>

  <div id="particles-js"></div>

  <div class="blobs-bg" aria-hidden="true">
    <svg viewBox="0 0 800 600" width="100%" height="100%">
      <defs>
        <linearGradient id="blobGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop stop-color="#fc67fa" />
          <stop offset="1" stop-color="#6ef2ff" />
        </linearGradient>
        <linearGradient id="blobGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop stop-color="#ffdbb6" />
          <stop offset="1" stop-color="#c77cf7" />
        </linearGradient>
      </defs>
      <path fill="url(#blobGrad1)" opacity="0.55">
        <animate attributeName="d" dur="16s" repeatCount="indefinite"
          values="M420,280Q487,380,377,420Q267,460,212,370Q157,280,233,174Q309,68,390,168Q471,268,420,280Z;
                  M470,330Q408,427,312,407Q216,387,189,314Q162,241,219,187Q276,133,367,156Q458,179,484,254Q510,329,470,330Z;
                  M420,280Q487,380,377,420Q267,460,212,370Q157,280,233,174Q309,68,390,168Q471,268,420,280Z" />
      </path>
      <path fill="url(#blobGrad2)" opacity="0.30">
        <animate attributeName="d" dur="20s" repeatCount="indefinite"
          values="M590,345Q611,425,520,470Q429,515,372,414Q315,313,400,238Q485,163,543,254Q601,345,590,345Z;
                  M600,380Q595,450,520,471Q445,492,400,422Q355,352,415,285Q475,218,539,253Q603,288,600,380Z;
                  M590,345Q611,425,520,470Q429,515,372,414Q315,313,400,238Q485,163,543,254Q601,345,590,345Z" />
      </path>
    </svg>
  </div>

  <div class="animated-bg"></div>

  <div class="container">
    <h2>🔐 AES + RSA Hybrid Encryptor</h2>

    <textarea id="plaintext" rows="4" placeholder="Enter text..."></textarea>

    <div class="button-group">
      <button onclick="generateRSAKeys()">🔑 Generate RSA Keys</button>
      <button onclick="encryptText()">🔒 Encrypt</button>
      <button onclick="decryptText()">🔓 Decrypt</button>
      <button onclick="toggleTheme()">🌓 Toggle Theme</button>
    </div>

    <h3>📦 Encrypted Output</h3>
    <div class="output-block">
      <strong>Encrypted Text:</strong>
      <pre id="encryptedData">--</pre>
      <button onclick="copyOutput('encryptedData')">📋 Copy</button>
    </div>
    <div class="output-block">
      <strong>Encrypted AES Key:</strong>
      <pre id="encryptedKey">--</pre>
      <button onclick="copyOutput('encryptedKey')">📋 Copy</button>
    </div>
    <div class="output-block">
      <strong>IV:</strong>
      <pre id="iv">--</pre>
      <button onclick="copyOutput('iv')">📋 Copy</button>
    </div>

    <h3>📖 Decrypted Text</h3>
    <pre id="decryptedText">--</pre>
  </div>

  <script>
    if (!window.crypto || !crypto.subtle) {
      alert("⚠️ Your browser does not support WebCrypto API. Use a modern browser.");
    }

    let rsaKeyPair = null;
    let aesKey, encryptedAESKey, encryptedData, iv;

    async function generateRSAKeys() {
      rsaKeyPair = await crypto.subtle.generateKey({
        name: "RSA-OAEP",
        modulusLength: 2048,
        publicExponent: new Uint8Array([1, 0, 1]),
        hash: "SHA-256"
      }, true, ["encrypt", "decrypt"]);
      alert("✅ RSA keys generated.");
    }

    async function generateAESKey() {
      aesKey = await crypto.subtle.generateKey({ name: "AES-GCM", length: 256 }, true, ["encrypt", "decrypt"]);
    }

    async function encryptText() {
      const text = document.getElementById("plaintext").value;
      if (!text) return alert("Enter text to encrypt");
      if (!rsaKeyPair) return alert("Generate RSA key first");

      await generateAESKey();
      iv = crypto.getRandomValues(new Uint8Array(12));
      const encoded = new TextEncoder().encode(text);
      encryptedData = await crypto.subtle.encrypt({ name: "AES-GCM", iv }, aesKey, encoded);
      const rawAesKey = await crypto.subtle.exportKey("raw", aesKey);
      encryptedAESKey = await crypto.subtle.encrypt({ name: "RSA-OAEP" }, rsaKeyPair.publicKey, rawAesKey);

      document.getElementById("encryptedData").textContent = bufferToBase64(encryptedData);
      document.getElementById("encryptedKey").textContent = bufferToBase64(encryptedAESKey);
      document.getElementById("iv").textContent = bufferToBase64(iv);
    }

    async function decryptText() {
      try {
        if (!encryptedData || !encryptedAESKey || !iv || !rsaKeyPair?.privateKey)
          return alert("❌ Missing data or keys");

        const rawKey = await crypto.subtle.decrypt({ name: "RSA-OAEP" }, rsaKeyPair.privateKey, encryptedAESKey);
        const key = await crypto.subtle.importKey("raw", rawKey, "AES-GCM", false, ["decrypt"]);
        const decrypted = await crypto.subtle.decrypt({ name: "AES-GCM", iv }, key, encryptedData);
        const decoded = new TextDecoder().decode(decrypted);
        document.getElementById("decryptedText").textContent = decoded;
      } catch (err) {
        console.error(err);
        alert("❌ Decryption failed.");
      }
    }

    function bufferToBase64(buf) {
      return btoa(String.fromCharCode(...new Uint8Array(buf)));
    }

    function copyOutput(id) {
      const text = document.getElementById(id).textContent;
      navigator.clipboard.writeText(text).then(() => alert("📋 Copied!"));
    }

    function toggleTheme() {
      document.documentElement.dataset.theme =
        document.documentElement.dataset.theme === "light" ? "" : "light";
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    particlesJS("particles-js", {
      particles: {
        number: { value: 80, density: { enable: true, value_area: 800 } },
        color: { value: "#00ffff" },
        shape: { type: "circle" },
        opacity: { value: 1, random: false },
        size: { value: 4, random: true },
        line_linked: {
          enable: true,
          distance: 120,
          color: "#00ffff",
          opacity: 0.6,
          width: 1
        },
        move: {
          enable: true,
          speed: 1.6,
          direction: "none",
          random: false,
          straight: false,
          out_mode: "out",
          bounce: false
        }
      },
      interactivity: {
        detect_on: "canvas",
        events: {
          onhover: { enable: true, mode: "repulse" },
          onclick: { enable: true, mode: "push" },
          resize: true
        },
        modes: {
          repulse: { distance: 100, duration: 0.4 },
          push: { particles_nb: 4 }
        }
      },
      retina_detect: true
    });
  </script>
</body>
</html>
